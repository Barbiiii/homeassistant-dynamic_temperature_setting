blueprint:
  name: Heizung - Wunschtemperatur & Offset-Abgleich
  description: Setzt die Soll-Temperatur auf die Wunschtemperatur und korrigiert den Offset basierend auf einem externen Sensor.
  domain: automation
  input:
    climate_entity:
      name: Heizungsthermostat
      selector:
        entity:
          domain: climate
    offset_entity:
      name: Offset-Entität (Number)
      selector:
        entity:
          domain: number
    temp_sensor_entity:
      name: Externer Temperatursensor (Ist-Temperatur)
      selector:
        entity:
          domain: sensor
    wunsch_temp_entity:
      name: Wunschtemperatur (Input-Helper)
      selector:
        entity:
          domain: input_number
    window_sensor_entity:
      name: Fenster-/Türsensor (Optional)
      selector:
        entity:
          domain: binary_sensor
      default: []

trigger:
  - platform: state
    entity_id: !input temp_sensor_entity
  - platform: state
    entity_id: !input wunsch_temp_entity
  - platform: state
    entity_id: !input climate_entity
    attribute: current_temperature

action:
  - if:
      - condition: template
        value_template: "{{ window_sensor_entity != [] and is_state(window